/* Configuraci√≥n Base */
body { margin: 0; overflow: hidden; font-family: 'Lato', sans-serif; background: #000; color: white; }

/* --- PUERTA Y SELLO --- */
.door-container { position: fixed; inset: 0; z-index: 100; display: flex; }
.door-panel {
    width: 50%; height: 100%;
    background: linear-gradient(to bottom, #2d1b15, #1a0f0d);
    position: relative; box-shadow: inset 0 0 50px #000; border-bottom: 15px solid #0f0502;
}
.door-panel::before {
    content: ''; position: absolute; inset: 0; opacity: 0.1;
    background-image: repeating-linear-gradient(90deg, transparent 0, transparent 2px, #000 2px, #000 4px);
}
#door-left { border-right: 2px solid #000; transform-origin: left; }
#door-right { border-left: 2px solid #000; transform-origin: right; }

.magic-lock-container {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    z-index: 102; width: 220px; height: 220px; cursor: pointer; transition: transform 0.3s;
}
.magic-lock-container:hover { transform: translate(-50%, -50%) scale(1.05); }

.magic-seal {
    width: 100%; height: 100%; border-radius: 50%;
    background: radial-gradient(circle, #3e2723, #1a0f0d);
    border: 4px double #ffd700;
    box-shadow: 0 0 30px rgba(0,0,0,0.8), 0 0 15px #ffd700;
    display: flex; align-items: center; justify-content: center; position: relative;
}
.rune { font-size: 4rem; color: #ffd700; text-shadow: 0 0 10px #ff0000; animation: pulse 2s infinite; }
.seal-ring { position: absolute; inset: 10px; border: 2px dashed rgba(255, 215, 0, 0.5); border-radius: 50%; animation: spinSlow 20s linear infinite; }
.lock-text { position: absolute; bottom: -3rem; width: 100%; text-align: center; color: #ffd700; font-family: 'Cinzel', serif; font-size: 0.875rem; letter-spacing: 0.1em; opacity: 0.8; }

@keyframes pulse { 0%, 100% { opacity: 0.8; text-shadow: 0 0 10px #ff0000; } 50% { opacity: 1; text-shadow: 0 0 25px #ff4500; } }
@keyframes spinSlow { to { transform: rotate(360deg); } }

/* --- ESCENARIO Y FONDOS --- */
#magic-flash { position: fixed; inset: 0; background: white; z-index: 90; pointer-events: none; opacity: 0; mix-blend-mode: overlay; }

#bg-layer { position: fixed; inset: 0; background-size: cover; background-position: center; opacity: 0; transition: opacity 1s; z-index: 0; }

/* CLASE ESPECIAL: FONDO INICIAL (PUERTA INTERIOR) */
.hearth-bg {
    background-image: url('img/puerta.png');
    /* Fallback por si la imagen no carga: un gradiente oscuro */
    background-color: #1a0f0d; 
}

.vignette { position: fixed; inset: 0; background: radial-gradient(transparent 30%, #000 100%); z-index: 1; pointer-events: none; }
#weather-canvas { position: fixed; inset: 0; z-index: 5; pointer-events: none; }

/* --- TARJETA DE TEXTO --- */
.story-card {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    width: 90%; max-width: 700px;
    background: rgba(12, 12, 12, 0.85);
    border: 1px solid rgba(255, 215, 0, 0.4);
    padding: 3rem; border-radius: 4px;
    text-align: center; opacity: 0; z-index: 20;
    box-shadow: 0 20px 60px rgba(0,0,0,0.9);
}
.ghibli-title { font-family: 'Cinzel', serif; color: #ffd700; text-shadow: 0 2px 5px rgba(0,0,0,0.8); }
.separator { width: 6rem; height: 2px; background-color: #eab308; margin: 1rem auto; opacity: 0.7; }
.ghibli-text { font-family: 'Dancing Script', cursive; font-size: 1.7rem; color: #f0f0f0; margin-top: 1.5rem; line-height: 1.6; text-shadow: 0 1px 2px rgba(0,0,0,0.8); }

.next-btn {
    margin-top: 2rem; background: rgba(0,0,0,0.5); border: 1px solid #ffd700; color: #ffd700;
    padding: 10px 40px; font-family: 'Cinzel', serif; cursor: pointer; transition: 0.3s; border-radius: 30px;
}
.next-btn:hover { background: #ffd700; color: #2d1b15; box-shadow: 0 0 20px #ffd700; }

/* --- RULETA PRO --- */
.hud-container { 
    position: fixed; bottom: 30px; right: 30px; 
    width: 200px; height: 200px; z-index: 50; 
    opacity: 0; transform: translateY(50px);
}

.dial-bezel {
    width: 100%; height: 100%; border-radius: 50%;
    background: linear-gradient(135deg, #b8860b, #5d4037, #b8860b);
    padding: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.8), inset 0 2px 5px rgba(255,255,255,0.3); position: relative;
}
.dial-bezel::after { content: ''; position: absolute; inset: 5px; border-radius: 50%; border: 2px dashed rgba(62, 39, 35, 0.6); pointer-events: none; }

.dial-inner { width: 100%; height: 100%; border-radius: 50%; position: relative; overflow: hidden; border: 2px solid #2c1810; box-shadow: inset 0 0 20px rgba(0,0,0,0.9); }
.dial-colors { width: 100%; height: 100%; border-radius: 50%; background: conic-gradient(#1e3a8a 0deg 90deg, #991b1b 90deg 180deg, #166534 180deg 270deg, #000000 270deg 360deg); }
.dial-overlay { position: absolute; inset: 0; pointer-events: none; background: radial-gradient(circle, transparent 40%, rgba(44, 24, 16, 0.6) 90%); }
.dial-glare { position: absolute; inset: 0; border-radius: 50%; pointer-events: none; background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, transparent 40%, transparent 100%); z-index: 10; }

.pointer { position: absolute; top: -18px; left: 50%; transform: translateX(-50%); width: 24px; height: 40px; z-index: 60; filter: drop-shadow(0 4px 3px rgba(0,0,0,0.7)); }
.pointer::before { content: ''; position: absolute; top: 0; left: 0; border-left: 12px solid transparent; border-right: 12px solid transparent; border-top: 35px solid #ffd700; }
.dial-center-gem { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 20px; height: 20px; background: radial-gradient(circle at 30% 30%, #ff4500, #8b0000); border: 2px solid #ffd700; border-radius: 50%; box-shadow: 0 2px 5px rgba(0,0,0,0.5); z-index: 20; }

/* --- CARTA FINAL --- */
#final-scene { position: fixed; inset: 0; z-index: 200; display: none; background: #050505; align-items: center; justify-content: center; opacity: 0; }
.letter { background: #fdf6e3; padding: 4rem; max-width: 550px; width: 90%; transform: rotate(-1deg); box-shadow: 0 0 60px rgba(255,215,0,0.15); color: #2c1810; position: relative; border-radius: 2px; }
.letter-title { font-size: 1.875rem; font-weight: bold; margin-bottom: 1.5rem; font-family: serif; color: #5d4037; }
.letter-body { font-family: serif; font-size: 1.125rem; line-height: 1.75; margin-bottom: 1.5rem; }
.letter-sign { text-align: right; font-weight: bold; font-size: 1.25rem; font-family: serif; color: #8b5a2b; }